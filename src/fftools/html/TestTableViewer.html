<!doctype html>

<html>

<head>
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name='gwt:module' content='edu.caltech.ipac.fftools.FFToolsDebug.gwt.xml'>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Test Fits Viewer</title>
</head>

<body>

<script type="text/javascript">
    {
        onFireflyLoaded= function() {
            firefly.addDataViewer( {"DataSource" : "URL",
                                    "DataColumn" : "FITS"
                                   },
                                  "fv3" )

        }
    }

</script>
<!--                                           -->
<!-- The body can have arbitrary html, or      -->
<!-- you can leave the body empty if you want  -->
<!-- to create a completely dynamic ui         -->
<!--                                           -->
<!--<body>-->
<!--add loading indicator while the app is being loaded-->
<form name="test">

    &nbsp;&nbsp;<a href="#usage">Usage</a> <br><br>
    &nbsp;&nbsp;<b> Enter table parameters, then click fv1 or fv2 to create the table in that div</b>

<pre>
    Type        : <input type="text" name="type" size="10"/>
    Source      : <input type="text" name="source" size="30"value="http://web.ipac.caltech.edu/staff/roby/demo/WiseDemoTable.tbl"/>
    PageSize    : <input type="text" name="pageSize" size="10"/>
    Filters     : <input type="text" name="filters" size="30"/>
    SortInfo    : <input type="text" name="sortInfo" size="20"/>
    TableOptions: <input type="text" name="tableOptions" size="50"/>

</pre>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<button onclick="createTable('fv1', test.type.value, test.source.value, test.filters.value, test.sortInfo.value, test.pageSize.value, test.tableOptions.value);return false;">  fv1  </button>
<button onclick="createTable('fv2', test.type.value, test.source.value, test.filters.value, test.sortInfo.value, test.pageSize.value, test.tableOptions.value);return false;">  fv2  </button>

</form>

<br>

fv1: width: 800px; height: 400px
<div id="fv1" style="width: 800px; height: 400px; padding: 20px 20px 20px 20px;"></div>

fv2: width: 100%; height: 500px
<div id="fv2" style="width: 95%; height: 500px; padding: 20px 20px 20px 20px;"></div>

fv3: width: 400px; height: 400px
<div id="fv3" style="width: 400px; height: 400px; padding: 20px 20px 20px 20px;"></div>


<a name="usage"/>
<pre>
    Usage: firefly.showTable(parameters, div)

    parameters is an object with attributes.  div is the div to load the table into.
    below is a list of all possible parameters.

    parameters:
        source      : required; location of the ipac table.  url or file path.
        type        : basic, selectable, or chart; default to basic if not given
        filters     : col_name [=|!=|<|>|<=|>=] value OR col_name IN (v1[,v2]*)
        sortInfo    : ASC|DESC,col_name
        pageSize    : positive integer
        startIdx    : positive integer
        tableOptions : see below

        tableOptions:  option=true|false [,option=true|false]*
            show-filter
            show-popout
            show-title
            show-toolbar
            show-options
            show-paging
            show-save
            show-units


    javascript example:

        var params = new Object();
            params.source = "http://shadev1/tbl_test/test.tbl";
            params.pageSize = "100";
            params.tableOptions = "show-popout=false";

        firefly.showTable(params, fv1);

</pre>


<script type="text/javascript">
   function createTable(divName, type, source, filters, sortInfo, pageSize, tableOptions) {

        var data = new Object();

        if (type) {
            data.type = type;
        }
        if (source) {
            data.source = source;
        }
        if (filters) {
            data.filters = filters;
        }
        if (sortInfo) {
            data.sortInfo = sortInfo;
        }
        if (pageSize) {
            data.pageSize = pageSize;
        }
        if (tableOptions) {
            data.tableOptions = tableOptions;
        }

        firefly.showTable(data, divName);
   }
</script>

<script type="text/javascript" language='javascript' src='fftools.nocache.js'></script>


<!-- OPTIONAL: include this if you want history support -->
<iframe id="__gwt_historyFrame" style="width:0;height:0;border:0"></iframe>

</body>

</html>
