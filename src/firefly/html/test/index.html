
<!doctype html>

<!--
  ~ License information at https://github.com/Caltech-IPAC/firefly/blob/master/License.txt
  -->

<html>

<head>
    <title>Firefly Tests</title>

    <style type="text/css">
        body {
            margin: 20px;
            width: 800px;
        }

        xmp {
            color: brown;
        }
        .test-desc {
            color: brown;
        }

        .tutorial {
            margin-top: 100px;
        }
        .tut-item {
            white-space: pre;
            background-color: antiquewhite;
            margin-top: -10px;
        }
    </style>

</head>

<body>

<h3>Firefly Test</h3>
<ul class="test-list">
    <li class="test-item"><a href="tests-main.html">Main Tests</a>
        <div class="test-desc">This page includes common APIs used in production by other projects.  It also contains tests to ensure that Firefly is able able to load data from external services, like TAP, SIAP, etc.</div>
    </li>
</ul>


<div class="tutorial">
    <h3>How to write your own tests</h3>


    <h4>To add a test to an existing page</h4>
    <div class="tut-item">
        Each test is presented as a template.  It consists of 3 parts:
        <b>expected</b>:  the expected results.  This can be a description, an image, or both
        <b>actual</b>:    the rendered results of executing the script
        <b>script</b>:    script to run.  Try to keep it clean and easy to understand.

        Below is a complete example of an actual test:
<xmp>
    <template title="GAIA tap search" class="tpl-size-s">
        <div id="expected" class="source-code">
            Table successfully loaded
            - VOTable
            - first 3 rows of gaia_source
        </div>
        <div id="actual" class="box-s w-2x"></div>
        <script>
            onFireflyLoaded = function (firefly) {
                tblReq = firefly.util.table.makeTblRequest('AsyncTapQuery', 'GAIA tap search',
                    { serviceUrl: "http://gea.esac.esa.int/tap-server/tap",
                        QUERY: "SELECT TOP 3 * FROM gaiadr2.gaia_source",
                    });

                firefly.showTable('actual', tblReq);
            }
        </script>
    </template>
</xmp>

        You may noticed CSS styles were used.
        For your convenience, there are predefined styles in the included <code>styles.css</code> file.
        These styles are designed for composition, meaning they were made to be used together.
        For instance, to make a vertical flex box two times the size of a small box. <xmp>           <div class="flow-v box-s w-2x" /> </xmp>

        Below is a list of other styles you can use:  ( look in <code>styles.css</code> for a complete listing )
    <xmp>
        flow-h          :horizontal flex box
        flow-v          :vertical flex box
        tpl-size-s      :small template
        tpl-size-m      :medium template
        tpl-size-l      :large template
        tpl-size-xl     :extra-large template
        box-s           :small box
        box-m           :medium box
        box-l           :large box
        box-xl          :extra-large box
        w-2x            :twice the width
        w-3x            :three times the width
        indent-1x       :indent once
        indent-2x       :indent twice
        indent-3x       :indent three times
        source-code     :shown as source code
    </xmp>
    </div>


    <h4>To add a new test page</h4>
    <div class="tut-item">
        Creating a new test page is pretty easy.  Create a blank html file like below.
        Make sure you include <code>styles.css</code> and <code>template_loader.js</code> into the head section.
        After that, start adding test into your page in the form of a template.
        Make sure to include your new page into this <code>index.html</code> file so it can be easily accessed.
<xmp>
    <html>
    <head>
        <title>Title of your test page</title>
        <link rel="stylesheet" href="styles.css">
        <script type="text/javascript" src="template_loader.js"></script>
    </head>

    <body>
    <!-- include your test template(s) here -->
    </body>
    </html>

</xmp>
    </div>
</div>



</body>