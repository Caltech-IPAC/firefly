<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><!doctype html>

<html>
<head>
    <title>Spitzer Heritage Archive: Application Program Interface
    (API)</title>
</head>

<body bgcolor="white">

<h3>Spitzer Heritage Archive VAO Support</h3>

Currently SHA supports Simple Image Access Protocol (SIAP) for
Level 1 (BCD) and Level 2 (PBCD) data access. The services support all required parameters 
listed in SIAP specification (POS, SIZE, FORMAT) and VERB parameter with two verbosity
levels: 1 and 3. With verbosity level 1, only the required and recommended fields are
added to the output table. With verbosity level 3, extra fields might be present. 
They output all the required and some recommended fields.
 <br><br>

Here are the URLs to do metadata queries: <br> 
<a href=http://sha.ipac.caltech.edu/applications/Spitzer/VO/VOServices?SERVICE=SIAP&DATASET=ivo%3A%2F%2Firsa.ipac%2Fspitzer.level1&FORMAT=METADATA>
 Simple Image Access for level 1 (BCD) images (DATASET=ivo://irsa.ipac/spitzer.level1) </a> <br>

<br>

<a href=http://sha.ipac.caltech.edu/applications/Spitzer/VO/VOServices?SERVICE=SIAP&DATASET=ivo%3A%2F%2Firsa.ipac%2Fspitzer.level2&FORMAT=METADATA> 
Simple Image Access for level 2 (PBCD) images (DATASET=ivo://irsa.ipac/spitzer.level2) </a> <br>

<br>
<h3>Spitzer Heritage Archive Application Program Interface (API)</h3>

The SHA data can be accessed via an HTTP GET program interface where
the request is a set of <i>parameter=value</i> pairs, and what is
returned is an IPAC Table containing metadata and URL links to
download products with the related ancillary files. This page
describes these input parameters and the columns returned.<P>

Note: When you try the URL in the browser, use "View Source" to see the result
in proper table format. <br>

<h3>Examples</h3>

<b>Search by fixed position</b><br>
<a href="/applications/Spitzer/SHA/servlet/DataService?RA=163.6136&DEC=-11.784&SIZE=0.5&VERB=3&DATASET=ivo%3A%2F%2Firsa.ipac%2Fspitzer.level2" target="_blank">applications/Spitzer/SHA/servlet/DataService?<b>RA=163.6136&amp;DEC=-11.784&amp;SIZE=0.5</b>&amp;VERB=3&amp;DATASET=ivo%3A%2F%2Firsa.ipac%2Fspitzer.level2</a>
<br><br>
<b>Search by moving target NAIF ID</b><br>
<a href="/applications/Spitzer/SHA/servlet/DataService?NAIFID=2003226&VERB=3&DATASET=ivo%3A%2F%2Firsa.ipac%2Fspitzer.level2"  target="_blank">applications/Spitzer/SHA/servlet/DataService?<b>NAIFID=2003226</b>&amp;VERB=3&amp;DATASET=ivo%3A%2F%2Firsa.ipac%2Fspitzer.level2</a>
<br><br>
<b>Search by program ID</b><br>
<a href="/applications/Spitzer/SHA/servlet/DataService?PID=30080&VERB=3&DATASET=ivo%3A%2F%2Firsa.ipac%2Fspitzer.level2"  target="_blank">applications/Spitzer/SHA/servlet/DataService?<b>PID=30080</b>&amp;VERB=3&amp;DATASET=ivo%3A%2F%2Firsa.ipac%2Fspitzer.level2</a>
<br><br>
<b>Search by Astronomical Observation Request ID</b><br>
<a href="/applications/Spitzer/SHA/servlet/DataService?REQKEY=21641216&VERB=3&DATASET=ivo%3A%2F%2Firsa.ipac%2Fspitzer.level2"  target="_blank">applications/Spitzer/SHA/servlet/DataService?<b>REQKEY=21641216</b>&amp;VERB=3&amp;DATASET=ivo%3A%2F%2Firsa.ipac%2Fspitzer.level2</a>
<br><br>

<h3>Input parameters</h3>

The input parameters are entered as standard HTTP
<i>parameter=value</i> pairs in HTTP/GET syntax. In this syntax, the
parameter name is followed by an equals sign (=) which is then followed by
a value. No extra spaces are allowed, and if the value contains any
spaces or special characters that might be ambiguous, they have to
be encoded formally as in any HTTP or URL reference (more discussion <a
href="http://www.w3schools.com/tags/ref_entities.asp" target="blank">here</A>). As shown
above, these pairs are separated from each other by ampersand (&amp;)
characters.
<br><br>
<table border="1" width="50%">
<tr><td width="30%"><b>DATASET</b></td><td>Data set. Two sets are
supported: <br>ivo://irsa.ipac.spitzer.level1 (BCD
data)<br>ivo://irsa.ipac.spitzer.level2 (PBCD data)<br></td></tr>
<tr><td width="30%"><b>VERB</b></td><td>Verbosity level, controls the
number of columns in the output.<br>1 - selected columns, 3 - all
available</td></tr>
<tr><td width="30%"><b>RA</b></td><td>Search by position: right ascension in degrees</td></tr>
<tr><td width="30%"><b>DEC</b></td><td>Search by position: declination in degrees</td></tr>
<tr><td width="30%"><b>SIZE</b></td><td>Search by position: region size in degrees</td></tr>
<tr><td width="30%"><b>NAIFID</b></td><td>Search by moving target:
NAIF ID, which is a unique number allocated to solar system objects
(e.g. planets, asteroids, comets, spacecraft) by the <a
href="http://naif.jpl.nasa.gov/naif/tutorials.html" target="blank">NAIF</a> at
JPL.</td></tr>
<tr><td width="30%"><b>PID</b></td><td>Search by program: program ID</td></tr>
<tr><td width="30%"><b>REQKEY</b></td><td>Search by AOR ID: Astronomical Observation Request ID</td></tr>
</table>
<br>

<h3>Output columns</h3>

The output columns  in the resultant table describe metadata and
include a link to download the requested data product and the
important ancillary products related to it. <b>Please note that all
output columns are available only when verbosity level is set to
3.</b>
<br>
<br>
<table border="1" width="100%"></td></tr>
<tr><td ><b>reqkey</b></td><td>AORKEY</td><td>Spitzer Astronomical Observation Request Number</td></tr>
<tr><td ><b>pbcdid</b></td><td>PBCD ID</td><td>Post Basic Calibrated
Data ID (Level 2 product search)</td></tr>
<tr><td ><b>bcdid</b></td><td>BCD ID</td><td>Basic Calibrated Data ID
(Level 1 product search)</td></tr>
<tr><td ><b>hasAccess</b></td><td>Public access 
</td><td>"true" if the data is public accessible, "false" if
 it is  proprietary data.  </td></tr>
<tr><td ><b>accessUrl</b></td><td>Product access reference
URL</td><td>The URL to be used to retrieve image or table, "NONE" if
product does not have public access</td></tr>
<tr><td ><b>accessWithAnc1Url</b></td><td>Zip access reference
URL</td><td>The URL to be used to retrieve the image or spectra with
important ancillary products (mask, uncertainty, etc.) as a zip
archive, "NONE" if product does not have public access</td></tr>
<tr><td ><b>modedisplayname</b></td><td>Instrument/Mode</td><td>Instrument/Mode</td></tr>
<tr><td ><b>wavelength</b></td><td>Bandpass</td><td>Bandpass ID</td></tr>
<tr><td ><b>cra</b></td><td>RA (J2000)</td><td>Right Ascension in
sexigesimal format HHMMSS J2000, of the FITS image. Example:
"2h23m14.3s"</td></tr>
<tr><td ><b>cdec</b></td><td>Dec (J2000)</td><td>Declination in
sexagesimal format DDMMSS J2000, of the FITS image. Example:
"-12d43m11s"</td></tr>
<tr><td ><b>exposuretime</b></td><td>Exposure time in
seconds</td><td>Exposure time (Level 1 products only)</td></tr>
<tr><td ><b>primary</b></td><td>Primary field</td><td>If this value is equal to 1, the observation was designed to include the originally specified target. If it is set to 0, the observation was obtained serendipitously of an offset field, and may or may not contain the originally specified target (most often, it does not)</td></tr>
<tr><td ><b>filetype</b></td><td>Table or Image</td><td>Table or Image</td></tr>
<tr><td ><b>externalname</b></td><td>File name</td><td>File name</td></tr>
<tr><td ><b>ptcomment</b></td><td>Product description</td><td>Product description</td></tr>
<tr><td ><b>ra</b></td><td>crval1 in FITS file</td><td>Right Ascension
in Equatorial J2000 for the center of the FITS image</td></tr>
<tr><td ><b>dec</b></td><td>crval2 in FITS file</td><td>Declination in
Equatorial J2000 for the center of the FITS image</td></tr>
<tr><td ><b>epoch</b></td><td>Epoch</td><td>Epoch year</td></tr>
<tr><td ><b>equinox</b></td><td>Equinox</td><td>Precessional year associated with the coordinate system</td></tr>
<tr><td ><b>begintime</b></td><td>Observation start</td><td>Observation start (Level 2 products only)</td></tr>
<tr><td ><b>endtime</b></td><td>Observation end</td><td>Observation end (Level 2 products only)</td></tr>
<tr><td ><b>scet</b></td><td>Spacecraft event time: the coordinated
universal time on board the spacecraft</td><td>Date and time of data
collection event (Level 1 products only)</td></tr>
<tr><td ><b>minwavelength</b></td><td>Min wavelength (microns)</td><td>Min wavelength (microns)</td></tr>
<tr><td ><b>maxwavelength</b></td><td>Max wavelength (microns)</td><td>Max wavelength (microns)</td></tr>
<tr><td ><b>filesize</b></td><td>File size in bytes</td><td>File size in bytes</td></tr>
<tr><td ><b>campid</b></td><td>Campaign ID</td><td>Instrument campaign ID</td></tr>
<tr><td ><b>ra1</b></td><td>RA of corner 1</td><td>RA position of the
lower left image corner [pixel space, where first pixel is located at
(0.5, 0.5), position (ra1, dec1) = (0.5, 0.5)]</td></tr>
<tr><td ><b>dec1</b></td><td>Dec of corner 1</td><td>DEC position of
the lower left image corner [pixel space, where first pixel is located
at (0.5, 0.5), position (ra1, dec1) = (0.5, 0.5)]</td></tr>
<tr><td ><b>ra2</b></td><td>RA of corner 2</td><td>RA position of the
lower right image corner [pixel space, where first pixel is located at
(0.5, 0.5), position (ra2, dec2) = (NAXIS1 + 0.5, 0.5)]</td></tr>
<tr><td ><b>dec2</b></td><td>Dec of corner 2</td><td>Dec position of
the lower right image corner [pixel space, where first pixel is
located at (0.5, 0.5), position (ra2, dec2) = (NAXIS1 + 0.5,
0.5)]</td></tr>
<tr><td ><b>ra3</b></td><td>RA of corner 3</td><td>RA position of the
upper right image corner [pixel space, where first pixel is located at
(0.5, 0.5), position (ra3, dec3) = (NAXIS1 + 0.5, NAXIS2 +
0.5)]</td></tr>
<tr><td ><b>dec3</b></td><td>Dec of corner 3</td><td>Dec position of
the upper right image corner [pixel space, where first pixel is
located at (0.5, 0.5), position (ra3, dec3) = (NAXIS1 + 0.5, NAXIS2 +
0.5)]</td></tr>
<tr><td ><b>ra4</b></td><td>RA of corner 4</td><td>RA position of the
upper left image corner [pixel space, where first pixel is located at
(0.5, 0.5), position (ra4, dec4) = (0.5, NAXIS2 + 0.5)]</td></tr>
<tr><td ><b>dec4</b></td><td>Dec of corner 4</td><td>Dec position of
the upper left image corner [pixel space, where first pixel is located
at (0.5, 0.5), position (ra4, dec4) = (0.5, NAXIS2 + 0.5)]</td></tr>
<tr><td ><b>naxis1</b></td><td>naxis1</td><td>The size of the image in pixels for dimension 1</td></tr>
<tr><td ><b>naxis2</b></td><td>naxis2</td><td>The size of the image in pixels for dimension 2</td></tr>
<tr><td ><b>cdelt1</b></td><td>cdelt1</td><td>The pixel scale (in
degrees on the sky per pixel) at the reference location for dimension
1</td></tr>
<tr><td ><b>cdelt2</b></td><td>cdelt2</td><td>The pixel scale (in
degrees on the sky per pixel) at the reference location for dimension
2</td></tr>
<tr><td ><b>crota2</b></td><td>crota2</td><td>The rotation angle from
the "up" direction to the celestial pole</td></tr>
<tr><td ><b>crpix1</b></td><td>crpix1</td><td>The pixel coordinate of
the reference location (can be fractional, in the image center or off
the image) for dimension 1</td></tr>
<tr><td ><b>crpix2</b></td><td>crpix2</td><td>The pixel coordinate of
the reference location (can be fractional, in the image center or off
the image) for dimension 2</td></tr>
<tr><td ><b>crval1</b></td><td>crval1</td><td>[deg] RA at CRPIX1, CRPIX2</td></tr>
<tr><td ><b>crval2</b></td><td>crval2</td><td>[deg] DEC at CRPIX1, CRPIX2</td></tr>
<tr><td ><b>ctype1</b></td><td>ctype1</td><td>The coordinate system
(first four characters) and WCS map projection (last three characters)
for dimension 1</td></tr>
<tr><td ><b>ctype2</b></td><td>ctype2</td><td>The coordinate system
(first four characters) and WCS map projection (last three characters)
for dimension 2</td></tr>
</table>
<br>

<h3>Response on error</h3>

If an error occurs when an HTTP request is being processed, an empty
IPAC table with a single attribute, named <em>ERROR</em>, will be
returned. Error message is a value of this attribute. 
<br>

</body>
</html>
